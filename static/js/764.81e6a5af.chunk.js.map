{"version":3,"file":"static/js/764.81e6a5af.chunk.js","mappings":"+MAqEA,UA/De,WACX,OAAoCA,EAAAA,EAAAA,UAAS,IAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAAkCF,EAAAA,EAAAA,UAAS,IAA3C,eAAOG,EAAP,KAAkBC,EAAlB,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,GAAWC,EAAAA,EAAAA,MAkBXC,GAAcC,EAAAA,EAAAA,SAAO,GAe3B,OAdAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAQP,EAAaQ,IAAI,SAC/BC,QAAQC,IAAI,oBACRN,EAAYO,QACZP,EAAYO,SAAU,EACfJ,IACPK,EAAAA,EAAAA,GAAW,GAAD,OA/BE,uBA+BF,OAAsBL,EAAtB,MACLM,MAAK,SAAAC,GACFhB,GAAa,OAAIgB,EAAIC,SACxB,IACAC,OAAM,SAAAC,GAAK,OAAI,IAAIC,MAAJ,gCAAmCD,GAAvC,GAEvB,GAAE,CAACjB,KAEG,iBAAKmB,MAAO,CAACC,OAAQ,UAArB,WACH,uDACA,kBAAMC,SA5BW,SAACC,GAClBA,EAAEC,iBAEwB,KAAtB5B,EAAW6B,OAIXvB,EAAgB,CAAEM,MAAOZ,IAHzB8B,OAAOC,MAAM,oBAKpB,EAmBG,WACI,kBACIC,KAAK,OACLC,aAAa,MACbC,WAAS,EACTC,YAAY,kBACZC,MAAOpC,EACPqC,SAxCQ,SAACV,GACjB,IAAMW,EAAUX,EAAEY,cAAcH,MAAMI,cACtCvC,EAAcqC,EACjB,EAsCWd,MAAO,CAACiB,MAAM,QAASC,OAAO,OAAQC,OAAQ,iBAAkBC,QAAS,IAAKC,aAAc,UAEhG,mBAAQb,KAAK,SAASR,MAAO,CAAEiB,MAAO,QAASC,OAAQ,OAAQI,WAAY,QAA3E,wBAEJ,wBACC5C,EAAU6C,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,MAAP,OACX,eAAaD,GAAIA,EAAjB,UACI,SAAC,KAAD,CAAeA,GAAIA,EAAIE,GAAE,UAAKF,GAAMG,MAAO,CAAEC,KAAM,CAACC,SAAU9C,EAAS8C,SAAUC,OAAQ/C,EAAS+C,SAAlG,SACKL,GADMD,IADNA,EADE,QAStB,C,oBCrDD,IAXmB,SAACO,GAChB,OAAOC,MAAM,GAAD,OAHA,iCAGA,OAAgBD,GAAhB,OAJA,6CAKPrC,MAAK,SAACC,GACH,OAAIA,EAAIsC,GACGtC,EAAIuC,OAEJC,QAAQC,OAAO,IAAIrC,MAAM,wBAE3C,GACJ,C","sources":["pages/Movies.js","services/Api.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { Link, useSearchParams, useLocation } from \"react-router-dom\";\nimport apiHandler from \"services/Api\";\n\nconst SEARCH_ENDPOINT = 'search/movie?query=';\n\nconst Movies = () => {\n    const [searchName, setSearchName] = useState('');\n    const [searchArr, setSearchArr] = useState([]);\n    const [searchParams, setSearchParams] = useSearchParams();\n    const location = useLocation();\n    \n    const handleInput = (e) => {\n        const request = e.currentTarget.value.toLowerCase();\n        setSearchName(request);\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (searchName.trim() === '') {\n            window.alert('Request is empty!');\n            return;\n        } else {\n            setSearchParams({ query: searchName });\n        }\n    };\n\n    const firstUpdate = useRef(true);\n    useEffect(() => {\n        const query = searchParams.get('query');\n        console.log('AAAAAAAAAAAAAAAA')\n        if (firstUpdate.current) {\n            firstUpdate.current = false\n        } else if (query) {\n            apiHandler(`${SEARCH_ENDPOINT}${query}&`)\n                .then(res => {\n                    setSearchArr([...res.results]);\n                })\n                .catch(error => new Error(`Something goes wrong: ${error}`));\n        }\n    }, [searchParams]);\n\n    return <div style={{margin: '0 40px'}}>\n        <h2>Search your favorite film</h2>\n        <form onSubmit={handleSubmit}>\n            <input\n                type=\"text\"\n                autoComplete=\"off\"\n                autoFocus\n                placeholder=\"Search any film\"\n                value={searchName}\n                onChange={handleInput}\n                style={{width:'300px', height:'40px', border: '1px solid gray', padding: '0', borderRadius: '5px' }}\n            />\n            <button type=\"submit\" style={{ width: '100px', height: '40px', marginLeft: '20px' }}>Search</button>\n        </form>\n        <ul>\n        {searchArr.map(({ id, title }) => (\n            <li key={id} id={id}>\n                <Link key={id} id={id} to={`${id}`} state={{ from: {pathname: location.pathname, search: location.search } }}>\n                    {title}\n                </Link>\n            </li>\n        ))}\n        </ul>\n    </div>\n};\n\nexport default Movies;","const API_KEY = 'api_key=b75cb860cbfad4e3e72cf9144d03b3b9';\nconst GEN_URL = 'https://api.themoviedb.org/3/'\n\nconst apiHandler = (endpoint) => {\n    return fetch(`${ GEN_URL }${endpoint}${API_KEY}`)\n        .then((res) => {\n            if (res.ok) {\n                return res.json()\n            } else {\n                return Promise.reject(new Error('Something went wrong'))\n            }\n    })\n}\n\nexport default apiHandler;"],"names":["useState","searchName","setSearchName","searchArr","setSearchArr","useSearchParams","searchParams","setSearchParams","location","useLocation","firstUpdate","useRef","useEffect","query","get","console","log","current","apiHandler","then","res","results","catch","error","Error","style","margin","onSubmit","e","preventDefault","trim","window","alert","type","autoComplete","autoFocus","placeholder","value","onChange","request","currentTarget","toLowerCase","width","height","border","padding","borderRadius","marginLeft","map","id","title","to","state","from","pathname","search","endpoint","fetch","ok","json","Promise","reject"],"sourceRoot":""}